<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Filters & Effects - Apply Filters to Images Online | ToolKit Pro</title>
    <meta name="description" content="Apply filters and effects to images online. Grayscale, sepia, blur, brightness, contrast, saturation. Works offline in your browser.">
    <meta name="keywords" content="image filters, photo effects, image editor, apply filters online">
    <link rel="canonical" href="https://yourdomain.com/image-filters">
    <link rel="stylesheet" href="../assets/css/common.css">
    <link rel="stylesheet" href="../assets/css/tool-specific.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="../" class="logo">
                <span>üß∞</span>
                <span>ToolKit Pro</span>
            </a>
        </div>
    </header>

    <div class="container">
        <h1>üé® Image Filters & Effects</h1>
        <p class="subtitle">Apply filters and adjust image properties. Real-time preview with instant results.</p>

        <div class="workspace" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <!-- Left: Upload & Preview -->
            <div>
                <div id="uploadArea" style="margin-bottom: 12px;">
                    <div style="border: 2px dashed var(--border); border-radius: 8px; padding: 25px; text-align: center; cursor: pointer; transition: all 0.3s;" id="dropZone" onclick="document.getElementById('fileInput').click()">
                        <div style="font-size: 2rem; margin-bottom: 5px;">üìÅ</div>
                        <div style="font-size: 0.85rem; color: var(--white); margin-bottom: 3px;">Click to upload</div>
                        <div style="font-size: 0.7rem; color: var(--gray);">JPG, PNG, WebP</div>
                    </div>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleFile(this.files[0])">
                </div>

                <!-- Preview -->
                <div id="previewArea" style="display: none; background: var(--light); border-radius: 8px; padding: 12px; text-align: center; border: 1px solid var(--border);">
                    <canvas id="canvas" style="max-width: 100%; max-height: 350px; border-radius: 6px;"></canvas>
                </div>
            </div>

            <!-- Right: Controls -->
            <div id="controls" style="display: none;">
                <!-- Quick Filters -->
                <div style="margin-bottom: 12px;">
                    <label style="font-size: 0.75rem; margin-bottom: 6px; display: block; color: var(--gray);">Quick Filters</label>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px;">
                        <button onclick="applyPreset('none')" class="preset-btn active" id="preset-none" style="padding: 6px; background: var(--primary); border: 1px solid var(--primary); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: white;">Original</button>
                        <button onclick="applyPreset('grayscale')" class="preset-btn" id="preset-grayscale" style="padding: 6px; background: var(--light); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: var(--white);">Grayscale</button>
                        <button onclick="applyPreset('sepia')" class="preset-btn" id="preset-sepia" style="padding: 6px; background: var(--light); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: var(--white);">Sepia</button>
                        <button onclick="applyPreset('invert')" class="preset-btn" id="preset-invert" style="padding: 6px; background: var(--light); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: var(--white);">Invert</button>
                        <button onclick="applyPreset('vintage')" class="preset-btn" id="preset-vintage" style="padding: 6px; background: var(--light); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: var(--white);">Vintage</button>
                        <button onclick="applyPreset('cool')" class="preset-btn" id="preset-cool" style="padding: 6px; background: var(--light); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: var(--white);">Cool</button>
                    </div>
                </div>

                <!-- Adjustments -->
                <div style="background: var(--light); border-radius: 8px; padding: 12px; margin-bottom: 12px; border: 1px solid var(--border); max-height: 280px; overflow-y: auto;">
                    <!-- Brightness -->
                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <label style="font-size: 0.75rem;">Brightness</label>
                            <span style="font-size: 0.75rem; color: var(--primary);" id="brightness-val">100%</span>
                        </div>
                        <input type="range" id="brightness" min="0" max="200" value="100" oninput="updateFilters()" style="width: 100%;">
                    </div>

                    <!-- Contrast -->
                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <label style="font-size: 0.75rem;">Contrast</label>
                            <span style="font-size: 0.75rem; color: var(--primary);" id="contrast-val">100%</span>
                        </div>
                        <input type="range" id="contrast" min="0" max="200" value="100" oninput="updateFilters()" style="width: 100%;">
                    </div>

                    <!-- Saturation -->
                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <label style="font-size: 0.75rem;">Saturation</label>
                            <span style="font-size: 0.75rem; color: var(--primary);" id="saturation-val">100%</span>
                        </div>
                        <input type="range" id="saturation" min="0" max="200" value="100" oninput="updateFilters()" style="width: 100%;">
                    </div>

                    <!-- Blur -->
                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <label style="font-size: 0.75rem;">Blur</label>
                            <span style="font-size: 0.75rem; color: var(--primary);" id="blur-val">0px</span>
                        </div>
                        <input type="range" id="blur" min="0" max="20" value="0" oninput="updateFilters()" style="width: 100%;">
                    </div>

                    <!-- Hue Rotate -->
                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <label style="font-size: 0.75rem;">Hue</label>
                            <span style="font-size: 0.75rem; color: var(--primary);" id="hue-val">0¬∞</span>
                        </div>
                        <input type="range" id="hue" min="0" max="360" value="0" oninput="updateFilters()" style="width: 100%;">
                    </div>

                    <!-- Opacity -->
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <label style="font-size: 0.75rem;">Opacity</label>
                            <span style="font-size: 0.75rem; color: var(--primary);" id="opacity-val">100%</span>
                        </div>
                        <input type="range" id="opacity" min="0" max="100" value="100" oninput="updateFilters()" style="width: 100%;">
                    </div>
                </div>

                <!-- Actions -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <button class="btn btn-secondary" onclick="resetFilters()" style="padding: 8px; font-size: 0.85rem;">üîÑ Reset</button>
                    <button class="btn btn-success" onclick="downloadImage()" style="padding: 8px; font-size: 0.85rem;">üíæ Download</button>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h2>Image Filters & Effects - Apply Filters Online</h2>
            <p>Apply filters and adjust image properties in real-time. Choose from quick filter presets or fine-tune brightness, contrast, saturation, blur, hue, and opacity with sliders.</p>
            <p><strong>Quick Filters:</strong> Original, Grayscale, Sepia, Invert, Vintage, Cool.</p>
            <p><strong>Privacy:</strong> All processing happens in your browser. No files uploaded to any server.</p>
        </div>
    </div>

    <div id="toast" class="toast">
        <span id="toastMessage">Success!</span>
    </div>

    <script>
        let originalImage = null;
        let canvas, ctx;

        // Drag and drop
        const dropZone = document.getElementById('dropZone');
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--primary)';
            dropZone.style.background = 'rgba(249, 115, 22, 0.1)';
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.style.borderColor = 'var(--border)';
            dropZone.style.background = 'transparent';
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--border)';
            dropZone.style.background = 'transparent';
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });

        function handleFile(file) {
            if (!file || !file.type.startsWith('image/')) {
                showToast('Please select an image', true);
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                originalImage = new Image();
                originalImage.onload = () => {
                    initCanvas();
                    document.getElementById('uploadArea').style.display = 'none';
                    document.getElementById('previewArea').style.display = 'block';
                    document.getElementById('controls').style.display = 'block';
                };
                originalImage.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function initCanvas() {
            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');

            const maxWidth = 450;
            const scale = Math.min(1, maxWidth / originalImage.width);
            canvas.width = originalImage.width * scale;
            canvas.height = originalImage.height * scale;

            updateFilters();
        }

        function applyPreset(preset) {
            // Update button styles
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.style.background = 'var(--light)';
                btn.style.borderColor = 'var(--border)';
                btn.style.color = 'var(--white)';
            });
            const activeBtn = document.getElementById('preset-' + preset);
            activeBtn.style.background = 'var(--primary)';
            activeBtn.style.borderColor = 'var(--primary)';
            activeBtn.style.color = 'white';

            // Reset all
            document.getElementById('brightness').value = 100;
            document.getElementById('contrast').value = 100;
            document.getElementById('saturation').value = 100;
            document.getElementById('blur').value = 0;
            document.getElementById('hue').value = 0;
            document.getElementById('opacity').value = 100;

            // Apply preset
            switch(preset) {
                case 'grayscale':
                    document.getElementById('saturation').value = 0;
                    break;
                case 'sepia':
                    document.getElementById('saturation').value = 50;
                    document.getElementById('hue').value = 30;
                    document.getElementById('contrast').value = 90;
                    break;
                case 'invert':
                    document.getElementById('hue').value = 180;
                    document.getElementById('brightness').value = 150;
                    break;
                case 'vintage':
                    document.getElementById('saturation').value = 70;
                    document.getElementById('contrast').value = 110;
                    document.getElementById('brightness').value = 110;
                    document.getElementById('hue').value = 20;
                    break;
                case 'cool':
                    document.getElementById('saturation').value = 120;
                    document.getElementById('hue').value = 200;
                    document.getElementById('brightness').value = 105;
                    break;
            }

            updateFilters();
        }

        function updateFilters() {
            const brightness = document.getElementById('brightness').value;
            const contrast = document.getElementById('contrast').value;
            const saturation = document.getElementById('saturation').value;
            const blur = document.getElementById('blur').value;
            const hue = document.getElementById('hue').value;
            const opacity = document.getElementById('opacity').value;

            // Update labels
            document.getElementById('brightness-val').textContent = brightness + '%';
            document.getElementById('contrast-val').textContent = contrast + '%';
            document.getElementById('saturation-val').textContent = saturation + '%';
            document.getElementById('blur-val').textContent = blur + 'px';
            document.getElementById('hue-val').textContent = hue + '¬∞';
            document.getElementById('opacity-val').textContent = opacity + '%';

            // Apply filters
            ctx.filter = `brightness(${brightness}%) contrast(${contrast}%) saturate(${saturation}%) blur(${blur}px) hue-rotate(${hue}deg) opacity(${opacity}%)`;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(originalImage, 0, 0, canvas.width, canvas.height);
        }

        function resetFilters() {
            applyPreset('none');
        }

        function downloadImage() {
            // Create a new canvas with original image size
            const downloadCanvas = document.createElement('canvas');
            const downloadCtx = downloadCanvas.getContext('2d');
            downloadCanvas.width = originalImage.width;
            downloadCanvas.height = originalImage.height;

            // Apply same filters
            const brightness = document.getElementById('brightness').value;
            const contrast = document.getElementById('contrast').value;
            const saturation = document.getElementById('saturation').value;
            const blur = document.getElementById('blur').value;
            const hue = document.getElementById('hue').value;
            const opacity = document.getElementById('opacity').value;

            downloadCtx.filter = `brightness(${brightness}%) contrast(${contrast}%) saturate(${saturation}%) blur(${blur}px) hue-rotate(${hue}deg) opacity(${opacity}%)`;
            downloadCtx.drawImage(originalImage, 0, 0);

            downloadCanvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'filtered_' + Date.now() + '.png';
                a.click();
                URL.revokeObjectURL(url);
                showToast('Image downloaded!');
            });
        }

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const msg = document.getElementById('toastMessage');
            msg.textContent = message;
            toast.className = 'toast show' + (isError ? ' error' : '');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
