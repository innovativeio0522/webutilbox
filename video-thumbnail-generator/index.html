<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Thumbnail Generator - Extract Frames from Video | ToolKit Pro</title>
    <meta name="description" content="Extract frames from video files. Generate thumbnails at specific timestamps. Free video thumbnail generator.">
    <meta name="keywords" content="video thumbnail, extract frame, video screenshot, frame capture, video preview">
    <link rel="canonical" href="https://yourdomain.com/video-thumbnail-generator">
    <link rel="stylesheet" href="../assets/css/common.css">
    <link rel="stylesheet" href="../assets/css/tool-specific.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="../" class="logo">
                <span>ðŸ§°</span>
                <span>ToolKit Pro</span>
            </a>
        </div>
    </header>

    <div class="container">
        <h1>ðŸŽ¬ Video Thumbnail Generator</h1>
        <p class="subtitle">Extract frames from video files as images. Capture specific moments.</p>

        <div class="workspace">
            <!-- Upload Area -->
            <div style="text-align: center; padding: 40px; border: 2px dashed var(--border); border-radius: 12px; background: var(--light); margin-bottom: 20px;">
                <div style="font-size: 3rem; margin-bottom: 15px;">ðŸŽ¥</div>
                <input type="file" id="videoFile" accept="video/*" style="display: none;" onchange="loadVideo()">
                <button class="btn btn-primary" onclick="document.getElementById('videoFile').click()" style="padding: 15px 30px;">
                    Select Video File
                </button>
                <p style="margin-top: 10px; font-size: 0.85rem; color: var(--gray);">Supports MP4, WebM, MOV, AVI, etc.</p>
            </div>

            <!-- Video Player & Controls -->
            <div id="videoControls" style="display: none;">
                <div style="background: var(--light); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid var(--border);">
                    <video id="videoPlayer" controls style="width: 100%; max-height: 400px; border-radius: 8px; background: #000; margin-bottom: 15px;"></video>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div>
                            <div style="font-size: 0.8rem; color: var(--gray);">Duration</div>
                            <div id="videoDuration" style="font-weight: 600; font-size: 1.1rem;"></div>
                        </div>
                        <div>
                            <div style="font-size: 0.8rem; color: var(--gray);">Resolution</div>
                            <div id="videoResolution" style="font-weight: 600; font-size: 1.1rem;"></div>
                        </div>
                        <div>
                            <div style="font-size: 0.8rem; color: var(--gray);">Current Time</div>
                            <div id="currentTime" style="font-weight: 600; font-size: 1.1rem; color: var(--primary);">00:00</div>
                        </div>
                    </div>

                    <!-- Capture Options -->
                    <div style="margin-bottom: 20px;">
                        <label style="font-size: 0.9rem; margin-bottom: 10px; display: block; font-weight: 600;">Capture Mode</label>
                        <select id="captureMode" onchange="updateCaptureMode()" style="width: 100%; padding: 12px; margin-bottom: 15px;">
                            <option value="current">Current Frame</option>
                            <option value="multiple">Multiple Frames (Auto)</option>
                            <option value="interval">At Intervals</option>
                        </select>

                        <div id="multipleOptions" style="display: none;">
                            <label style="font-size: 0.85rem; margin-bottom: 6px; display: block;">Number of Frames</label>
                            <input type="number" id="frameCount" value="5" min="2" max="20" style="width: 100%; padding: 10px; margin-bottom: 10px;">
                        </div>

                        <div id="intervalOptions" style="display: none;">
                            <label style="font-size: 0.85rem; margin-bottom: 6px; display: block;">Interval (seconds)</label>
                            <input type="number" id="intervalSeconds" value="5" min="1" max="60" style="width: 100%; padding: 10px; margin-bottom: 10px;">
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-success" onclick="captureFrame()" style="flex: 1; padding: 12px;">
                            ðŸ“¸ Capture Frame(s)
                        </button>
                        <button class="btn" onclick="clearThumbnails()" style="padding: 12px;">
                            Clear All
                        </button>
                    </div>
                </div>

                <!-- Thumbnails -->
                <div id="thumbnailsSection" style="display: none; background: var(--light); border-radius: 12px; padding: 20px; border: 1px solid var(--border);">
                    <h3 style="font-size: 1rem; margin-bottom: 15px;">Captured Frames (<span id="thumbCount">0</span>)</h3>
                    <div id="thumbnails" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
                    </div>
                    <button class="btn btn-success" onclick="downloadAll()" style="width: 100%; padding: 12px;">
                        Download All Frames
                    </button>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h2>Video Thumbnail Generator</h2>
            <p>Extract frames from video files as images. Capture current frame, multiple frames automatically, or at specific intervals.</p>
            <p><strong>Features:</strong> Current frame capture, auto-generate multiple thumbnails, interval-based capture, download individual or all frames.</p>
            <p><strong>Privacy:</strong> All processing happens in your browser. No files are uploaded to any server.</p>
        </div>
    </div>

    <div id="toast" class="toast">
        <span id="toastMessage">Success!</span>
    </div>

    <style>
        .thumbnail-item {
            background: var(--dark);
            border-radius: 8px;
            padding: 10px;
            border: 1px solid var(--border);
        }
        .thumbnail-item img {
            width: 100%;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        .thumbnail-item button {
            width: 100%;
            padding: 8px;
            background: var(--primary);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .thumbnail-item button:hover {
            background: #ea580c;
        }
    </style>

    <script>
        let video = null;
        let thumbnails = [];

        function loadVideo() {
            const file = document.getElementById('videoFile').files[0];
            if (!file) return;

            video = document.getElementById('videoPlayer');
            video.src = URL.createObjectURL(file);

            video.addEventListener('loadedmetadata', () => {
                const duration = formatTime(video.duration);
                const resolution = `${video.videoWidth} Ã— ${video.videoHeight}`;
                
                document.getElementById('videoDuration').textContent = duration;
                document.getElementById('videoResolution').textContent = resolution;
                document.getElementById('videoControls').style.display = 'block';
                
                showToast('Video loaded successfully!');
            });

            video.addEventListener('timeupdate', () => {
                document.getElementById('currentTime').textContent = formatTime(video.currentTime);
            });
        }

        function updateCaptureMode() {
            const mode = document.getElementById('captureMode').value;
            document.getElementById('multipleOptions').style.display = mode === 'multiple' ? 'block' : 'none';
            document.getElementById('intervalOptions').style.display = mode === 'interval' ? 'block' : 'none';
        }

        async function captureFrame() {
            if (!video) return;

            const mode = document.getElementById('captureMode').value;

            if (mode === 'current') {
                captureSingleFrame(video.currentTime);
            } else if (mode === 'multiple') {
                const count = parseInt(document.getElementById('frameCount').value);
                const interval = video.duration / (count + 1);
                
                for (let i = 1; i <= count; i++) {
                    const time = interval * i;
                    await captureAtTime(time);
                }
            } else if (mode === 'interval') {
                const interval = parseInt(document.getElementById('intervalSeconds').value);
                const count = Math.floor(video.duration / interval);
                
                for (let i = 0; i < count; i++) {
                    const time = interval * i;
                    await captureAtTime(time);
                }
            }

            displayThumbnails();
            showToast('Frame(s) captured!');
        }

        function captureSingleFrame(time) {
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                thumbnails.push({ url, blob, time });
                displayThumbnails();
            }, 'image/png');
        }

        async function captureAtTime(time) {
            return new Promise((resolve) => {
                video.currentTime = time;
                video.addEventListener('seeked', function handler() {
                    video.removeEventListener('seeked', handler);
                    captureSingleFrame(time);
                    resolve();
                });
            });
        }

        function displayThumbnails() {
            const container = document.getElementById('thumbnails');
            container.innerHTML = '';

            thumbnails.forEach((thumb, index) => {
                const item = document.createElement('div');
                item.className = 'thumbnail-item';
                item.innerHTML = `
                    <img src="${thumb.url}" alt="Frame ${index + 1}">
                    <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 8px; text-align: center;">
                        ${formatTime(thumb.time)}
                    </div>
                    <button onclick="downloadThumbnail(${index})">Download</button>
                `;
                container.appendChild(item);
            });

            document.getElementById('thumbCount').textContent = thumbnails.length;
            document.getElementById('thumbnailsSection').style.display = thumbnails.length > 0 ? 'block' : 'none';
        }

        function downloadThumbnail(index) {
            const thumb = thumbnails[index];
            const a = document.createElement('a');
            a.href = thumb.url;
            a.download = `frame_${formatTime(thumb.time).replace(/:/g, '-')}.png`;
            a.click();
            showToast('Frame downloaded!');
        }

        function downloadAll() {
            thumbnails.forEach((thumb, index) => {
                setTimeout(() => {
                    const a = document.createElement('a');
                    a.href = thumb.url;
                    a.download = `frame_${index + 1}_${formatTime(thumb.time).replace(/:/g, '-')}.png`;
                    a.click();
                }, index * 200);
            });
            showToast(`Downloading ${thumbnails.length} frames...`);
        }

        function clearThumbnails() {
            thumbnails.forEach(thumb => URL.revokeObjectURL(thumb.url));
            thumbnails = [];
            document.getElementById('thumbnailsSection').style.display = 'none';
            showToast('All thumbnails cleared');
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const msg = document.getElementById('toastMessage');
            msg.textContent = message;
            toast.className = 'toast show' + (isError ? ' error' : '');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
