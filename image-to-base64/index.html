<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image to Base64 Converter - Convert Images to Base64 Online | ToolKit Pro</title>
    <meta name="description" content="Convert images to Base64 strings online for free. Encode JPG, PNG, GIF, WebP to Base64. Works offline in your browser.">
    <meta name="keywords" content="image to base64, base64 encoder, image encoder, convert image to base64">
    <link rel="canonical" href="https://yourdomain.com/image-to-base64">
    <link rel="stylesheet" href="../assets/css/common.css">
    <link rel="stylesheet" href="../assets/css/tool-specific.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="../" class="logo">
                <span>üß∞</span>
                <span>ToolKit Pro</span>
            </a>
        </div>
    </header>

    <div class="container">
        <h1>üî¢ Image to Base64 Converter</h1>
        <p class="subtitle">Convert images to Base64 encoded strings. Perfect for embedding images in HTML, CSS, or JSON.</p>

        <div class="workspace" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <!-- Left Column: Upload & Preview -->
            <div>
                <!-- Upload Area -->
                <div style="margin-bottom: 12px;">
                    <div style="border: 2px dashed var(--border); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;" id="dropZone" onclick="document.getElementById('fileInput').click()">
                        <div style="font-size: 2rem; margin-bottom: 5px;">üìÅ</div>
                        <div style="font-size: 0.85rem; color: var(--white); margin-bottom: 3px;">Click to upload</div>
                        <div style="font-size: 0.7rem; color: var(--gray);">JPG, PNG, GIF, WebP, SVG</div>
                    </div>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleFile(this.files[0])">
                </div>

                <!-- Preview -->
                <div id="previewSection" style="display: none;">
                    <div style="background: var(--light); border-radius: 8px; padding: 12px; text-align: center; border: 1px solid var(--border);">
                        <div style="font-size: 0.75rem; color: var(--gray); margin-bottom: 8px;">Preview</div>
                        <img id="preview" style="max-width: 100%; max-height: 200px; border-radius: 6px;">
                        <div style="margin-top: 8px; font-size: 0.75rem; color: var(--gray);" id="imageInfo">-</div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Output -->
            <div id="outputSection" style="display: none;">
                <!-- Format Options -->
                <div style="margin-bottom: 10px;">
                    <label style="font-size: 0.75rem; margin-bottom: 6px; display: block; color: var(--gray);">Output Format</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px;">
                        <button onclick="setFormat('datauri')" id="btn-datauri" class="format-btn active" style="padding: 6px; background: var(--primary); border: 1px solid var(--primary); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: white;">Data URI</button>
                        <button onclick="setFormat('plain')" id="btn-plain" class="format-btn" style="padding: 6px; background: var(--light); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: var(--white);">Plain</button>
                        <button onclick="setFormat('css')" id="btn-css" class="format-btn" style="padding: 6px; background: var(--light); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.75rem; color: var(--white);">CSS</button>
                    </div>
                </div>

                <!-- Base64 Output -->
                <div style="margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <label style="font-size: 0.75rem; color: var(--gray);">Base64 String</label>
                        <span style="font-size: 0.7rem; color: var(--gray);" id="stringLength">0 chars</span>
                    </div>
                    <textarea id="base64Output" readonly style="width: 100%; height: 240px; padding: 10px; font-family: 'Courier New', monospace; font-size: 0.7rem; resize: none; background: var(--light); border: 1px solid var(--border); border-radius: 6px; color: var(--white);"></textarea>
                </div>

                <!-- Action Buttons -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <button class="btn btn-primary" onclick="copyToClipboard()" style="padding: 8px; font-size: 0.85rem;">üìã Copy</button>
                    <button class="btn btn-secondary" onclick="downloadAsText()" style="padding: 8px; font-size: 0.85rem;">üíæ Download</button>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h2>Image to Base64 Converter - Encode Images Online</h2>
            <p>Convert any image to Base64 encoded string. Base64 encoding allows you to embed images directly in HTML, CSS, or JSON without external file references. Perfect for email templates, data URIs, and API responses.</p>
            <p><strong>Use Cases:</strong> Email templates, inline CSS backgrounds, JSON APIs, reducing HTTP requests, embedding small icons.</p>
            <p><strong>Privacy:</strong> All conversion happens in your browser. Images are never uploaded to any server.</p>
        </div>
    </div>

    <div id="toast" class="toast">
        <span id="toastMessage">Success!</span>
    </div>

    <script>
        let currentBase64 = '';
        let currentFormat = 'datauri';
        let imageType = '';

        // Drag and drop
        const dropZone = document.getElementById('dropZone');
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--primary)';
            dropZone.style.background = 'rgba(249, 115, 22, 0.1)';
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.style.borderColor = 'var(--border)';
            dropZone.style.background = 'transparent';
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--border)';
            dropZone.style.background = 'transparent';
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });

        function handleFile(file) {
            if (!file || !file.type.startsWith('image/')) {
                showToast('Please select an image file', true);
                return;
            }

            imageType = file.type;
            const reader = new FileReader();
            reader.onload = (e) => {
                currentBase64 = e.target.result;
                document.getElementById('preview').src = currentBase64;
                
                // Show image info
                const img = new Image();
                img.onload = () => {
                    document.getElementById('imageInfo').textContent = 
                        `${img.width} √ó ${img.height} px ‚Ä¢ ${formatSize(file.size)} ‚Ä¢ ${file.type.split('/')[1].toUpperCase()}`;
                };
                img.src = currentBase64;

                updateOutput();
                document.getElementById('previewSection').style.display = 'block';
                document.getElementById('outputSection').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        function setFormat(format) {
            currentFormat = format;
            
            // Update button styles
            document.querySelectorAll('.format-btn').forEach(btn => {
                btn.style.background = 'var(--light)';
                btn.style.borderColor = 'var(--border)';
            });
            const activeBtn = document.getElementById('btn-' + format);
            activeBtn.style.background = 'var(--primary)';
            activeBtn.style.borderColor = 'var(--primary)';
            
            updateOutput();
        }

        function updateOutput() {
            let output = '';
            
            if (currentFormat === 'datauri') {
                output = currentBase64;
            } else if (currentFormat === 'plain') {
                output = currentBase64.split(',')[1];
            } else if (currentFormat === 'css') {
                output = `background-image: url('${currentBase64}');`;
            }
            
            document.getElementById('base64Output').value = output;
            document.getElementById('stringLength').textContent = output.length.toLocaleString() + ' chars';
        }

        function copyToClipboard() {
            const output = document.getElementById('base64Output');
            output.select();
            document.execCommand('copy');
            showToast('Copied to clipboard!');
        }

        function downloadAsText() {
            const output = document.getElementById('base64Output').value;
            const blob = new Blob([output], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'base64_' + Date.now() + '.txt';
            a.click();
            URL.revokeObjectURL(url);
            showToast('Downloaded!');
        }

        function formatSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const msg = document.getElementById('toastMessage');
            msg.textContent = message;
            toast.className = 'toast show' + (isError ? ' error' : '');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
