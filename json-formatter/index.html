<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON, YAML, XML Formatter - Free Online Data Formatter | ToolKit Pro</title>
    <meta name="description" content="Format JSON, YAML, and XML online free. Multi-format data formatter with validation. No upload required - works offline in your browser.">
    <meta name="keywords" content="json formatter, yaml formatter, xml formatter, data formatter online, json validator, yaml validator, xml validator, format json yaml xml">
    <link rel="canonical" href="https://yourdomain.com/json-formatter">
    <link rel="stylesheet" href="../assets/css/common.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="../" class="logo">
                <span>üß∞</span>
                <span>ToolKit Pro</span>
            </a>
        </div>
    </header>

    <div class="container">
        <h1>üóÇÔ∏è Data Formatter (JSON, YAML, XML)</h1>
        <p class="subtitle">Format, validate, and convert between JSON, YAML, and XML. Free, fast, and privacy-focused.</p>

        <!-- Format Tabs -->
        <div style="display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap;">
            <button id="jsonTab" class="format-tab active" onclick="switchFormat('json')">JSON</button>
            <button id="yamlTab" class="format-tab" onclick="switchFormat('yaml')">YAML</button>
            <button id="xmlTab" class="format-tab" onclick="switchFormat('xml')">XML</button>
        </div>

        <div class="workspace">
            <div class="input-group">
                <label id="inputLabel">JSON Input</label>
                <textarea id="inputText" placeholder='{"example": "value", "nested": {"key": "data"}}'></textarea>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" onclick="formatData()">Format / Prettify</button>
                <button class="btn btn-primary" onclick="minifyData()">Minify</button>
                <button class="btn btn-secondary" onclick="validateData()">Validate Only</button>
                <button class="btn btn-success" onclick="copyOutput()">Copy Result</button>
            </div>
            
            <div class="output-container" id="outputContainer">
                <div class="output-label">Result</div>
                <div class="output-content" id="outputText"></div>
            </div>
        </div>

        <div class="info-section">
            <h2>Multi-Format Data Formatter</h2>
            <p>Format and validate JSON, YAML, and XML data in your browser. All processing happens locally - your data never leaves your device.</p>
            <p><strong>Supported Formats:</strong> JSON (JavaScript Object Notation), YAML (YAML Ain't Markup Language), XML (Extensible Markup Language).</p>
            <p><strong>Features:</strong> Instant formatting, syntax validation, minification, error detection, and one-click copy. Works offline once loaded.</p>
        </div>
    </div>

    <div id="toast" class="toast">
        <span id="toastMessage">Success!</span>
    </div>

    <style>
        .format-tab {
            padding: 10px 20px;
            background: var(--dark);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--white);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
        }
        .format-tab:hover {
            background: rgba(249, 115, 22, 0.1);
            border-color: var(--primary);
        }
        .format-tab.active {
            background: var(--primary);
            border-color: var(--primary);
        }
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script>
        let currentFormat = 'json';

        function switchFormat(format) {
            currentFormat = format;
            
            // Update tabs
            document.querySelectorAll('.format-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(format + 'Tab').classList.add('active');
            
            // Update labels and placeholders
            const inputLabel = document.getElementById('inputLabel');
            const inputText = document.getElementById('inputText');
            
            if (format === 'json') {
                inputLabel.textContent = 'JSON Input';
                inputText.placeholder = '{"example": "value", "nested": {"key": "data"}}';
            } else if (format === 'yaml') {
                inputLabel.textContent = 'YAML Input';
                inputText.placeholder = 'example: value\nnested:\n  key: data';
            } else if (format === 'xml') {
                inputLabel.textContent = 'XML Input';
                inputText.placeholder = '<root>\n  <example>value</example>\n  <nested>\n    <key>data</key>\n  </nested>\n</root>';
            }
        }

        function formatData() {
            const input = document.getElementById('inputText').value;
            
            try {
                if (currentFormat === 'json') {
                    const parsed = JSON.parse(input);
                    showOutput(JSON.stringify(parsed, null, 2));
                    showToast('JSON formatted successfully!');
                } else if (currentFormat === 'yaml') {
                    const parsed = jsyaml.load(input);
                    showOutput(jsyaml.dump(parsed, { indent: 2, lineWidth: -1 }));
                    showToast('YAML formatted successfully!');
                } else if (currentFormat === 'xml') {
                    const formatted = formatXML(input);
                    showOutput(formatted);
                    showToast('XML formatted successfully!');
                }
            } catch (e) {
                showOutput('‚ùå Invalid ' + currentFormat.toUpperCase() + ': ' + e.message, true);
                showToast('Invalid ' + currentFormat.toUpperCase(), true);
            }
        }

        function minifyData() {
            const input = document.getElementById('inputText').value;
            
            try {
                if (currentFormat === 'json') {
                    const parsed = JSON.parse(input);
                    showOutput(JSON.stringify(parsed));
                    showToast('JSON minified successfully!');
                } else if (currentFormat === 'yaml') {
                    const parsed = jsyaml.load(input);
                    showOutput(jsyaml.dump(parsed, { flowLevel: 0 }));
                    showToast('YAML minified successfully!');
                } else if (currentFormat === 'xml') {
                    const minified = input.replace(/>\s+</g, '><').trim();
                    showOutput(minified);
                    showToast('XML minified successfully!');
                }
            } catch (e) {
                showOutput('‚ùå Invalid ' + currentFormat.toUpperCase() + ': ' + e.message, true);
                showToast('Invalid ' + currentFormat.toUpperCase(), true);
            }
        }

        function validateData() {
            const input = document.getElementById('inputText').value;
            
            try {
                if (currentFormat === 'json') {
                    JSON.parse(input);
                    showOutput('‚úÖ Valid JSON!');
                    showToast('Valid JSON!');
                } else if (currentFormat === 'yaml') {
                    jsyaml.load(input);
                    showOutput('‚úÖ Valid YAML!');
                    showToast('Valid YAML!');
                } else if (currentFormat === 'xml') {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(input, 'text/xml');
                    const error = doc.querySelector('parsererror');
                    if (error) {
                        throw new Error(error.textContent);
                    }
                    showOutput('‚úÖ Valid XML!');
                    showToast('Valid XML!');
                }
            } catch (e) {
                showOutput('‚ùå Invalid: ' + e.message, true);
                showToast('Invalid ' + currentFormat.toUpperCase(), true);
            }
        }

        function formatXML(xml) {
            const PADDING = '  ';
            const reg = /(>)(<)(\/*)/g;
            let formatted = '';
            let pad = 0;

            xml = xml.replace(reg, '$1\n$2$3');
            
            xml.split('\n').forEach((node) => {
                let indent = 0;
                if (node.match(/.+<\/\w[^>]*>$/)) {
                    indent = 0;
                } else if (node.match(/^<\/\w/) && pad > 0) {
                    pad -= 1;
                } else if (node.match(/^<\w[^>]*[^\/]>.*$/)) {
                    indent = 1;
                } else {
                    indent = 0;
                }

                formatted += PADDING.repeat(pad) + node + '\n';
                pad += indent;
            });

            return formatted.trim();
        }

        function showOutput(text, isError = false) {
            const container = document.getElementById('outputContainer');
            const content = document.getElementById('outputText');
            content.textContent = text;
            container.classList.add('show');
            container.style.borderLeftColor = isError ? 'var(--danger)' : 'var(--secondary)';
        }

        function copyOutput() {
            const text = document.getElementById('outputText')?.textContent;
            if (!text) return showToast('Nothing to copy', true);
            navigator.clipboard.writeText(text).then(() => {
                showToast('Copied to clipboard!');
            });
        }

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const msg = document.getElementById('toastMessage');
            msg.textContent = message;
            toast.className = 'toast show' + (isError ? ' error' : '');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
