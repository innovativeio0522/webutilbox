<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favicon Generator - Generate Favicons Online Free | ToolKit Pro</title>
    <meta name="description" content="Generate favicons in multiple sizes from one image. Create 16x16, 32x32, 64x64, 128x128, 256x256 favicons. Works offline.">
    <meta name="keywords" content="favicon generator, create favicon, favicon maker, ico generator">
    <link rel="canonical" href="https://yourdomain.com/favicon-generator">
    <link rel="stylesheet" href="../assets/css/common.css">
    <link rel="stylesheet" href="../assets/css/tool-specific.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="../" class="logo">
                <span>游빓</span>
                <span>ToolKit Pro</span>
            </a>
        </div>
    </header>

    <div class="container">
        <h1>游꿢 Favicon Generator</h1>
        <p class="subtitle">Generate favicons in multiple sizes from one image. Perfect for websites and web apps.</p>

        <div class="workspace">
            <!-- Upload Area -->
            <div id="uploadArea" style="margin-bottom: 15px;">
                <div style="border: 2px dashed var(--border); border-radius: 8px; padding: 25px; text-align: center; cursor: pointer; transition: all 0.3s;" id="dropZone" onclick="document.getElementById('fileInput').click()">
                    <div style="font-size: 2rem; margin-bottom: 5px;">游늬</div>
                    <div style="font-size: 0.9rem; color: var(--white); margin-bottom: 3px;">Click to upload or drag and drop</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">PNG, JPG, SVG (Square images work best)</div>
                </div>
                <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleFile(this.files[0])">
            </div>

            <!-- Preview & Download -->
            <div id="result" style="display: none;">
                <!-- Preview Grid -->
                <div style="background: var(--light); border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid var(--border);">
                    <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 12px;">Preview (All Sizes)</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 12px;">
                        <!-- 16x16 -->
                        <div style="text-align: center;">
                            <div style="background: white; padding: 8px; border-radius: 6px; margin-bottom: 6px; display: inline-block;">
                                <canvas id="canvas-16" width="16" height="16" style="image-rendering: pixelated;"></canvas>
                            </div>
                            <div style="font-size: 0.7rem; color: var(--gray);">16칑16</div>
                        </div>
                        <!-- 32x32 -->
                        <div style="text-align: center;">
                            <div style="background: white; padding: 8px; border-radius: 6px; margin-bottom: 6px; display: inline-block;">
                                <canvas id="canvas-32" width="32" height="32"></canvas>
                            </div>
                            <div style="font-size: 0.7rem; color: var(--gray);">32칑32</div>
                        </div>
                        <!-- 64x64 -->
                        <div style="text-align: center;">
                            <div style="background: white; padding: 8px; border-radius: 6px; margin-bottom: 6px; display: inline-block;">
                                <canvas id="canvas-64" width="64" height="64"></canvas>
                            </div>
                            <div style="font-size: 0.7rem; color: var(--gray);">64칑64</div>
                        </div>
                        <!-- 128x128 -->
                        <div style="text-align: center;">
                            <div style="background: white; padding: 8px; border-radius: 6px; margin-bottom: 6px; display: inline-block;">
                                <canvas id="canvas-128" width="128" height="128"></canvas>
                            </div>
                            <div style="font-size: 0.7rem; color: var(--gray);">128칑128</div>
                        </div>
                        <!-- 256x256 -->
                        <div style="text-align: center;">
                            <div style="background: white; padding: 8px; border-radius: 6px; margin-bottom: 6px; display: inline-block;">
                                <canvas id="canvas-256" width="256" height="256"></canvas>
                            </div>
                            <div style="font-size: 0.7rem; color: var(--gray);">256칑256</div>
                        </div>
                    </div>
                </div>

                <!-- Download Options -->
                <div style="background: var(--light); border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid var(--border);">
                    <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 10px;">Download Individual Sizes</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px;">
                        <button onclick="downloadSize(16)" class="btn btn-secondary" style="padding: 8px; font-size: 0.8rem;">游닌 16칑16</button>
                        <button onclick="downloadSize(32)" class="btn btn-secondary" style="padding: 8px; font-size: 0.8rem;">游닌 32칑32</button>
                        <button onclick="downloadSize(64)" class="btn btn-secondary" style="padding: 8px; font-size: 0.8rem;">游닌 64칑64</button>
                        <button onclick="downloadSize(128)" class="btn btn-secondary" style="padding: 8px; font-size: 0.8rem;">游닌 128칑128</button>
                        <button onclick="downloadSize(256)" class="btn btn-secondary" style="padding: 8px; font-size: 0.8rem;">游닌 256칑256</button>
                    </div>
                </div>

                <!-- Download All -->
                <button onclick="downloadAll()" class="btn btn-success" style="width: 100%; padding: 12px; font-size: 0.95rem;">游닍 Download All Sizes (ZIP)</button>

                <!-- HTML Code -->
                <div style="background: var(--light); border-radius: 8px; padding: 15px; margin-top: 15px; border: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div style="font-size: 0.85rem; color: var(--gray);">HTML Code</div>
                        <button onclick="copyCode()" class="btn btn-primary" style="padding: 4px 10px; font-size: 0.75rem;">游늶 Copy</button>
                    </div>
                    <textarea id="htmlCode" readonly style="width: 100%; height: 80px; padding: 10px; font-family: 'Courier New', monospace; font-size: 0.7rem; resize: none; background: var(--dark); border: 1px solid var(--border); border-radius: 6px; color: var(--white);"></textarea>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h2>Favicon Generator - Create Favicons for Your Website</h2>
            <p>Generate favicons in all standard sizes (16칑16, 32칑32, 64칑64, 128칑128, 256칑256) from a single image. Upload a square image for best results. Perfect for websites, web apps, and progressive web apps (PWA).</p>
            <p><strong>Tip:</strong> Use a simple, recognizable icon or logo. Square images (1:1 aspect ratio) work best. PNG with transparency is recommended.</p>
            <p><strong>Privacy:</strong> All generation happens in your browser. No files uploaded to any server.</p>
        </div>
    </div>

    <div id="toast" class="toast">
        <span id="toastMessage">Success!</span>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script>
        let originalImage = null;
        const sizes = [16, 32, 64, 128, 256];

        // Drag and drop
        const dropZone = document.getElementById('dropZone');
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--primary)';
            dropZone.style.background = 'rgba(249, 115, 22, 0.1)';
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.style.borderColor = 'var(--border)';
            dropZone.style.background = 'transparent';
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--border)';
            dropZone.style.background = 'transparent';
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });

        function handleFile(file) {
            if (!file || !file.type.startsWith('image/')) {
                showToast('Please select an image', true);
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                originalImage = new Image();
                originalImage.onload = () => {
                    generateFavicons();
                    document.getElementById('uploadArea').style.display = 'none';
                    document.getElementById('result').style.display = 'block';
                };
                originalImage.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function generateFavicons() {
            sizes.forEach(size => {
                const canvas = document.getElementById(`canvas-${size}`);
                const ctx = canvas.getContext('2d');
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';
                ctx.drawImage(originalImage, 0, 0, size, size);
            });

            // Generate HTML code
            const htmlCode = `<!-- Favicon Links -->
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="64x64" href="/favicon-64x64.png">
<link rel="apple-touch-icon" sizes="128x128" href="/favicon-128x128.png">
<link rel="apple-touch-icon" sizes="256x256" href="/favicon-256x256.png">`;
            
            document.getElementById('htmlCode').value = htmlCode;
        }

        function downloadSize(size) {
            const canvas = document.getElementById(`canvas-${size}`);
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `favicon-${size}x${size}.png`;
                a.click();
                URL.revokeObjectURL(url);
                showToast(`${size}칑${size} downloaded!`);
            });
        }

        async function downloadAll() {
            if (typeof JSZip === 'undefined') {
                showToast('Loading ZIP library...', false);
                setTimeout(downloadAll, 1000);
                return;
            }

            const zip = new JSZip();

            // Add all sizes to ZIP
            for (const size of sizes) {
                const canvas = document.getElementById(`canvas-${size}`);
                const blob = await new Promise(resolve => canvas.toBlob(resolve));
                zip.file(`favicon-${size}x${size}.png`, blob);
            }

            // Add HTML file
            const htmlCode = document.getElementById('htmlCode').value;
            zip.file('favicon-links.html', htmlCode);

            // Generate and download ZIP
            const content = await zip.generateAsync({ type: 'blob' });
            const url = URL.createObjectURL(content);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'favicons.zip';
            a.click();
            URL.revokeObjectURL(url);
            showToast('All favicons downloaded!');
        }

        function copyCode() {
            const code = document.getElementById('htmlCode');
            code.select();
            document.execCommand('copy');
            showToast('HTML code copied!');
        }

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const msg = document.getElementById('toastMessage');
            msg.textContent = message;
            toast.className = 'toast show' + (isError ? ' error' : '');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
